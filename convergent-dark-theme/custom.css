/* ============================================
   Convergent Solutions Dark Mode Theme
   Version: 1.1.0 (Refactored for Specificity)
   Author: Convergent Solutions
   ============================================ */

/* ============================================
   1. CSS CUSTOM PROPERTIES (VARIABLES)
   ============================================ */
:root {
   /* Primary Brand Colors */
   --cs-primary: #0066cc;
   --cs-secondary: #00cc99;
   --cs-accent: #ff6b35;

   /* Dark Mode Base Colors */
   --bg-primary: #1a1a1a;
   --bg-secondary: #2d2d2d;
   --bg-tertiary: #3a3a3a;
   --bg-hover: #404040;
   --bg-active: #4a4a4a;

   /* Text Colors */
   --text-primary: #ffffff;
   --text-secondary: #b0b0b0;
   --text-tertiary: #808080;

   /* Border Colors */
   --border-primary: #404040;
   --border-focus: var(--cs-primary);

   /* Dimensions & Spacing */
   --radius-md: 8px;
   --transition-fast: 150ms ease;
}

/* ============================================
   2. GLOBAL RESETS (SCOPED)
   ============================================ */

/* Force Dark Mode defaults ONLY when .dark class is present or forced */
html.dark,
html:not(.dark),
body {
   background-color: var(--bg-primary) !important;
   color: var(--text-primary);
   -webkit-font-smoothing: antialiased;
}

/* ============================================
   3. UTILITY CLASS OVERRIDES (SCOPED)
   ============================================ */

/* Override Tailwind background utilities ONLY within Dark Mode container */
html.dark .bg-white,
html:not(.dark) .bg-white,
html.dark .bg-gray-50,
html:not(.dark) .bg-gray-50,
html.dark .bg-gray-100,
html:not(.dark) .bg-gray-100 {
   background-color: var(--bg-primary) !important;
}

/* Fix specific dark mode tailwind utility clashes */
html.dark .dark\:bg-gray-900,
html.dark .bg-gray-950 {
   background-color: var(--bg-secondary) !important;
}

html.dark .bg-gray-800 {
   background-color: var(--bg-tertiary) !important;
}

/* Override Text Colors */
html.dark .text-gray-900,
html:not(.dark) .text-gray-900,
html.dark .text-black,
html:not(.dark) .text-black,
html.dark .dark\:text-gray-100,
html:not(.dark) .dark\:text-gray-100 {
   color: var(--text-primary) !important;
}

html.dark .text-gray-500,
html:not(.dark) .text-gray-500,
html.dark .text-gray-600,
html:not(.dark) .text-gray-600 {
   color: var(--text-secondary) !important;
}

/* ============================================
   4. COMPONENT SPECIFIC OVERRIDES
   ============================================ */

/* Sidebar */
html.dark #sidebar,
html.dark .sidebar {
   background-color: #0f172a !important;
   border-right: 1px solid var(--border-primary);
}

/* Chat Bubbles */
html.dark .user-message,
html.dark .message-user {
   background: linear-gradient(135deg, var(--cs-primary), var(--cs-secondary)) !important;
   color: #ffffff !important;
   border: none !important;
}

html.dark .ai-message,
html.dark .message-ai {
   background-color: var(--bg-secondary) !important;
   color: var(--text-primary) !important;
}

/* Inputs & Forms */
html.dark input,
html.dark textarea,
html.dark select {
   background-color: var(--bg-secondary) !important;
   color: var(--text-primary) !important;
   border: 1px solid var(--border-primary) !important;
}

html.dark input:focus,
html.dark textarea:focus {
   border-color: var(--cs-primary) !important;
   box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.2) !important;
}

/* Buttons */
/* Apply to all primary buttons */
html.dark button.primary,
html.dark .btn-primary,
html.dark button[type="submit"],
html.dark #send-message-button {
   background-color: var(--cs-primary) !important;
   color: white !important;
   border-radius: var(--radius-md);
}

/* Modals */
html.dark .modal-content,
html.dark [role="dialog"] {
   background-color: var(--bg-primary) !important;
   border: 1px solid var(--border-primary);
}

/* Code Blocks */
html.dark pre,
html.dark code {
   background-color: #0d1117 !important;
   color: #c9d1d9 !important;
}

/* Menu/Dropdowns */
html.dark [role="menu"],
html.dark .dropdown-content {
   background-color: #0f172a !important;
   border: 1px solid var(--border-primary);
}

/* Scrollbars (Webkit) - Global usually okay, but let's stick to theme */
::-webkit-scrollbar {
   width: 8px;
}

::-webkit-scrollbar-track {
   background: var(--bg-primary);
}

::-webkit-scrollbar-thumb {
   background: #475569;
   border-radius: 4px;
}

/* Header Fixes */
html.dark nav.sticky,
html.dark .sticky.top-0 {
   background-color: var(--bg-primary) !important;
}

/* Header Gradient Killers */
html.dark .from-white,
html.dark .via-white {
   --tw-gradient-from: var(--bg-primary) !important;
   --tw-gradient-to: var(--bg-primary) !important;
   background-image: none !important;
   background-color: var(--bg-primary) !important;
}

/* ============================================
   5. INTERACTIVE & POLISH
   ============================================ */

/* Focus Rings */
*:focus-visible {
   outline: 2px solid var(--cs-primary) !important;
}

/* Splash Loader - ID specific, safe to be global */
#splash-screen {
   background-color: var(--bg-primary) !important;
}